# Location Vicinity Check - Visual Guide

## System Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    REPORT SUBMISSION FLOW                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    USER                    SYSTEM                   DATABASE
     â”‚                        â”‚                          â”‚
     â”‚  1. Open Report Form   â”‚                          â”‚
     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                          â”‚
     â”‚                        â”‚                          â”‚
     â”‚  2. Fill Details       â”‚                          â”‚
     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                          â”‚
     â”‚                        â”‚                          â”‚
     â”‚  3. Click Submit       â”‚                          â”‚
     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                          â”‚
     â”‚                        â”‚                          â”‚
     â”‚                    â”Œâ”€â”€â”€â”´â”€â”€â”€â”                      â”‚
     â”‚                    â”‚ AUTH  â”‚                      â”‚
     â”‚                    â”‚ CHECK â”‚                      â”‚
     â”‚                    â””â”€â”€â”€â”¬â”€â”€â”€â”˜                      â”‚
     â”‚                        â”‚                          â”‚
     â”‚                    â”Œâ”€â”€â”€â”´â”€â”€â”€â”                      â”‚
     â”‚                    â”‚ LOAD  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€> â”‚
     â”‚                    â”‚PROFILEâ”‚ <â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
     â”‚                    â””â”€â”€â”€â”¬â”€â”€â”€â”˜                      â”‚
     â”‚                        â”‚                          â”‚
     â”‚                    â”Œâ”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚
     â”‚                    â”‚ BARANGAY   â”‚                 â”‚
     â”‚                    â”‚  ALLOWED?  â”‚                 â”‚
     â”‚                    â””â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”˜                 â”‚
     â”‚                        â”‚    â”‚                     â”‚
     â”‚                       YES  NO                     â”‚
     â”‚                        â”‚    â”‚                     â”‚
     â”‚                        â”‚    â””â”€â”€> âŒ ERROR         â”‚
     â”‚                        â”‚         "Not allowed"    â”‚
     â”‚  <â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                         â”‚
     â”‚                        â”‚                          â”‚
     â”‚                    â”Œâ”€â”€â”€â”´â”€â”€â”€â”€â”€â”                    â”‚
     â”‚                    â”‚   GET   â”‚                    â”‚
     â”‚                    â”‚   GPS   â”‚                    â”‚
     â”‚                    â”‚LOCATION â”‚                    â”‚
     â”‚                    â””â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                    â”‚
     â”‚                        â”‚                          â”‚
     â”‚                    â”Œâ”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
     â”‚                    â”‚  CALCULATE   â”‚               â”‚
     â”‚                    â”‚  DISTANCE    â”‚               â”‚
     â”‚                    â”‚ (Haversine)  â”‚               â”‚
     â”‚                    â””â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
     â”‚                        â”‚                          â”‚
     â”‚                    â”Œâ”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”                   â”‚
     â”‚                    â”‚ WITHIN   â”‚                   â”‚
     â”‚                    â”‚ RADIUS?  â”‚                   â”‚
     â”‚                    â””â”€â”€â”€â”¬â”€â”€â”¬â”€â”€â”€â”˜                   â”‚
     â”‚                        â”‚  â”‚                       â”‚
     â”‚                       YES NO                      â”‚
     â”‚                        â”‚  â”‚                       â”‚
     â”‚                        â”‚  â””â”€â”€> âŒ ERROR           â”‚
     â”‚                        â”‚      "Outside vicinity"  â”‚
     â”‚  <â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      (with distance)    â”‚
     â”‚                        â”‚                          â”‚
     â”‚                    â”Œâ”€â”€â”€â”´â”€â”€â”€â”€â”                     â”‚
     â”‚                    â”‚VALIDATEâ”‚                     â”‚
     â”‚                    â”‚ FORM   â”‚                     â”‚
     â”‚                    â””â”€â”€â”€â”¬â”€â”€â”€â”€â”˜                     â”‚
     â”‚                        â”‚                          â”‚
     â”‚                    â”Œâ”€â”€â”€â”´â”€â”€â”€â”€â”                     â”‚
     â”‚                    â”‚ SUBMIT â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€> â”‚
     â”‚                    â”‚ REPORT â”‚ <â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
     â”‚                    â””â”€â”€â”€â”¬â”€â”€â”€â”€â”˜                     â”‚
     â”‚                        â”‚                          â”‚
     â”‚  4. âœ… Success!       â”‚                          â”‚
     â”‚  <â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                         â”‚
     â”‚                                                   â”‚
```

## Geographic Coverage Map

```
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚      MALOLOS CITY BARANGAYS              â”‚
        â”‚      (Allowed Reporting Areas)           â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                    N (14.86Â°)
                        â†‘
                        â”‚
                    â”Œâ”€â”€â”€â”´â”€â”€â”€â”€â”
                    â”‚BULIHAN â”‚
                    â”‚ r=1.8kmâ”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚           â”‚           â”‚
        â”Œâ”€â”€â”€â”´â”€â”€â”€â”   â”Œâ”€â”€â”€â”´â”€â”€â”€â”  â”Œâ”€â”€â”€â”´â”€â”€â”€â”
        â”‚ LOOK  â”‚   â”‚DAKILA â”‚  â”‚ MOJON â”‚
        â”‚r=1.5kmâ”‚   â”‚r=1.5kmâ”‚  â”‚r=1.7kmâ”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                    â”Œâ”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ PINAGBAKAHAN â”‚
                    â”‚   r=2.0km    â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
        W (120.80Â°) â†â”€â”€â”€â”´â”€â”€â”€â†’ E (120.83Â°)
                        â”‚
                        â†“
                    S (14.83Â°)

Legend:
  â”œâ”€â”€â”€â”€â”€â”¤  Coverage area (radius from center)
  â€¢ Center point (latitude, longitude)
  r Radius in kilometers
```

## Distance Calculation

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            HAVERSINE FORMULA VISUALIZATION               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

        User Location              Barangay Center
             ğŸ“                          â­
         (lat1, lon1)              (lat2, lon2)
              â”‚                          â”‚
              â”‚    Calculate Distance    â”‚
              â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
              â”‚                          â”‚
              â”‚      Using Formula:      â”‚
              â”‚                          â”‚
              â”‚   d = R Ã— c              â”‚
              â”‚                          â”‚
              â”‚   where:                 â”‚
              â”‚   - R = 6,371 km         â”‚
              â”‚   - c = 2Ã—atan2(âˆša,âˆš1-a) â”‚
              â”‚   - a = sinÂ²(Î”Ï†/2) +     â”‚
              â”‚       cos(Ï†1)Ã—cos(Ï†2)Ã—   â”‚
              â”‚       sinÂ²(Î”Î»/2)         â”‚
              â”‚                          â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Example Calculation:
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

User at:     14.8450Â°N, 120.8120Â°E
Barangay:    14.8441Â°N, 120.8118Â°E
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Distance:    ~0.10 km
Radius:      2.0 km
Result:      âœ… WITHIN VICINITY
```

## Decision Matrix

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        REPORT SUBMISSION DECISION TREE                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                   START
                     â”‚
              â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”
              â”‚ Authenticated?â”‚
              â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
              â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”
              â”‚     YES     â”‚
              â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
              â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚ Registered Barangay â”‚
              â”‚   in allowed list?  â”‚
              â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚      â”‚
                   YES     NO â”€â”€â”€â”€â”€â”€> âŒ REJECT
                     â”‚               "Barangay not allowed"
                     â”‚
              â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚  GPS Location OK?   â”‚
              â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚      â”‚
                   YES     NO â”€â”€â”€â”€â”€â”€> âŒ REJECT
                     â”‚               "Enable GPS"
                     â”‚
              â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚ Distance Calculationâ”‚
              â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
              â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚  d â‰¤ radius?        â”‚
              â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚      â”‚
                   YES     NO â”€â”€â”€â”€â”€â”€> âŒ REJECT
                     â”‚               "Outside vicinity"
                     â”‚               "Distance: X.XX km"
                     â”‚               "Allowed: Y.Y km"
                     â”‚
              â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚   Form Valid?       â”‚
              â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚      â”‚
                   YES     NO â”€â”€â”€â”€â”€â”€> âŒ REJECT
                     â”‚               "Fill all fields"
                     â”‚
              â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚   âœ… ACCEPT         â”‚
              â”‚   Submit Report     â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Coverage Zones

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         BARANGAY COVERAGE VISUALIZATION                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    Example: Pinagbakahan (2.0 km radius)

                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚                 â”‚
              â”Œâ”€â”€â”€â”¤   OUTSIDE       â”‚
              â”‚   â”‚   âŒ Reject     â”‚
              â”‚   â”‚   (>2.0 km)     â”‚
              â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
          â”Œâ”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚                            â”‚
          â”‚    VICINITY ZONE           â”‚
          â”‚    âœ… Accept               â”‚
          â”‚    (0 - 2.0 km)            â”‚
          â”‚                            â”‚
          â”‚       â”Œâ”€â”€â”€â”€â”€â”              â”‚
          â”‚       â”‚  â­  â”‚â—„â”€â”€â”€â”€ Barangay Center
          â”‚       â””â”€â”€â”€â”€â”€â”˜              â”‚
          â”‚                            â”‚
          â”‚                            â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
              â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â””â”€â”€â”€â”¤   OUTSIDE       â”‚
                  â”‚   âŒ Reject     â”‚
                  â”‚   (>2.0 km)     â”‚
                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  â­ = Barangay center (14.8441, 120.8118)
  â”œâ”€â”€â”€â”€â”€â”¤ = 2.0 km radius
  âœ… = Report allowed
  âŒ = Report rejected
```

## User Journey Map

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            USER EXPERIENCE FLOW                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

SCENARIO 1: Successful Report (Happy Path)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ‘¤ User opens app
    â”‚
    â”œâ”€> ğŸ“± Navigates to Map Screen
    â”‚
    â”œâ”€> ğŸ—ºï¸ Sees reports and map
    â”‚
    â”œâ”€> âš ï¸ Clicks "Report" button
    â”‚
    â”œâ”€> ğŸ“ Fills incident form
    â”‚       - Type: "Accident"
    â”‚       - Description: "Car collision"
    â”‚       - Photos: 2 images
    â”‚
    â”œâ”€> ğŸ“¤ Clicks "Submit"
    â”‚
    â”œâ”€> â³ System checks location...
    â”‚
    â””â”€> âœ… SUCCESS!
        "Report submitted successfully"
        (System detected user in barangay)


SCENARIO 2: Failed Report (Outside Vicinity)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ‘¤ User opens app
    â”‚
    â”œâ”€> ğŸ“± Navigates to Map Screen
    â”‚
    â”œâ”€> âš ï¸ Clicks "Report" button
    â”‚
    â”œâ”€> ğŸ“ Fills incident form
    â”‚
    â”œâ”€> ğŸ“¤ Clicks "Submit"
    â”‚
    â”œâ”€> â³ System checks location...
    â”‚
    â””â”€> âŒ FAILED!
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ Location Verification Failed â”‚
        â”‚                              â”‚
        â”‚ You are 3.5 km away from     â”‚
        â”‚ your barangay (Pinagbakahan) â”‚
        â”‚                              â”‚
        â”‚ Allowed distance: 2.0 km     â”‚
        â”‚                              â”‚
        â”‚ Please go to your barangay   â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Technical Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         CODE EXECUTION FLOW                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

handleSubmitReport()
    â”‚
    â”œâ”€> AuthService.getCurrentUser()
    â”‚   â”‚
    â”‚   â””â”€> âœ“ User authenticated
    â”‚
    â”œâ”€> UserService.getCurrentUserProfile()
    â”‚   â”‚
    â”‚   â””â”€> âœ“ Profile loaded
    â”‚
    â”œâ”€> isReportingAllowed(barangay)
    â”‚   â”‚
    â”‚   â””â”€> âœ“ Barangay allowed
    â”‚
    â”œâ”€> LocationService.getCurrentLocation()
    â”‚   â”‚
    â”‚   â””â”€> âœ“ GPS coordinates obtained
    â”‚
    â”œâ”€> isWithinBarangayVicinity()
    â”‚   â”‚
    â”‚   â”œâ”€> calculateDistance()
    â”‚   â”‚   â”‚
    â”‚   â”‚   â””â”€> Haversine formula
    â”‚   â”‚       distance = 1.2 km
    â”‚   â”‚
    â”‚   â””â”€> Compare: 1.2 km â‰¤ 2.0 km?
    â”‚       â”‚
    â”‚       â””â”€> âœ“ Within vicinity
    â”‚
    â”œâ”€> validateFormFields()
    â”‚   â”‚
    â”‚   â””â”€> âœ“ Form valid
    â”‚
    â””â”€> ReportsService.createReport()
        â”‚
        â””â”€> âœ… Report saved to Firestore
```

## Data Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            DATA & STATE MANAGEMENT                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

INPUT DATA                  PROCESSING              OUTPUT
â•â•â•â•â•â•â•â•â•â•                  â•â•â•â•â•â•â•â•â•â•              â•â•â•â•â•â•

User Profile                                        Decision
â”œâ”€ Barangay: "Pinagbakahan" â”€â”€â”                    â”Œâ”€> âœ… Allow
â”œâ”€ Email: "user@email.com"    â”‚                    â”‚   OR
â””â”€ Role: "user"               â”‚                    â””â”€> âŒ Deny
                              â”‚
GPS Location                  â”‚
â”œâ”€ Latitude: 14.8450         â”œâ”€â”€> VALIDATION
â”œâ”€ Longitude: 120.8120       â”‚    LOGIC
â””â”€ Accuracy: Â±20m            â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                             â”œâ”€â”€â”€>â”‚ Barangayâ”‚
Barangay Data                â”‚    â”‚ Allowed?â”‚
â”œâ”€ Center: 14.8441,120.8118  â”‚    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
â”œâ”€ Radius: 2.0 km            â”‚         â”‚
â””â”€ Name: "Pinagbakahan"      â”‚    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
                             â”œâ”€â”€â”€>â”‚Distance â”‚
Report Data                  â”‚    â”‚  Check  â”‚
â”œâ”€ Type: "Accident"          â”‚    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
â”œâ”€ Description: "..."        â”‚         â”‚
â”œâ”€ Media: [photo1, photo2]   â”‚    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
â””â”€ Location: GPS coords      â”œâ”€â”€â”€>â”‚ Within  â”‚
                             â”‚    â”‚ Radius? â”‚
                             â”‚    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
                             â”‚         â”‚
                             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€> RESULT
                                              â”œâ”€> isWithin: true
                                              â”œâ”€> distance: 1.2km
                                              â””â”€> allowed: 2.0km
```

---

**Visual Guide Version**: 1.0  
**Created**: October 4, 2025  
**Purpose**: Developer & stakeholder reference
